{"meta":{"title":"tomnic blog","subtitle":null,"description":null,"author":"tomnic.wang","url":"http://wylgeek.github.io.com"},"pages":[],"posts":[{"title":"","slug":"CDH_ABOUT","date":"2018-09-29T06:18:46.099Z","updated":"2018-09-21T02:28:14.445Z","comments":true,"path":"2018/09/29/CDH_ABOUT/","link":"","permalink":"http://wylgeek.github.io.com/2018/09/29/CDH_ABOUT/","excerpt":"","text":"CDH灾备CDH高可用元数据库高可用HDFS高可用YARN高可用HBASE高可用其他组件高可用Hadoop高级特性数据副本机制hadoop默认情况数据存储三副本。数据存储时，若是数据块写到了A节点，则数据块的第一个副本会写到集群内A节点相同机架的另一台服务器上，数据块的第二个副本会写到集群内A节点的不同机架的一台服务器上。hdfs三副本机制，保证了数据的安全性。 数据平衡 DataNode间数据平衡 数据不平衡原因： 向现有群集添加了新的DataNode 集群机器磁盘坏死 集群DataNode下线 解决方案： HDFS提供了一个平衡器实用程序，可以分析块放置并平衡DataNode上的数据。平衡器移动块直到认为集群是平衡的，这意味着每个DataNode的利用率（节点上已用空间与节点总容量的比率）不同于集群的利用率（使用的空间比率）集群到集群的总容量）不超过给定的阈值百分比。但平衡器不在单个DataNode上的各个卷之间进行平衡。 DataNode磁盘数据平衡 数据不平衡原因： 当我们往HDFS上写入新的数据块，DataNode 将会使用volume选择策略来为这个块选择存储的地方。目前Hadoop支持两种volume选择策略：round-robin 和 available space（详情参见：HDFS-1804），我们可以通过 dfs.datanode.fsdataset.volume.choosing.policy 参数来设置。默认为循环（round-robin）策略将新块均匀分布在可用磁盘上；而可用空间（ available-space ）策略优先将数据写入具有最大可用空间的磁盘。 默认情况下，DataNode 是使用基于round-robin策略来写入新的数据块。然而在一个长时间运行的集群中，由于HDFS中的大规模文件删除或者通过往DataNode 中添加新的磁盘仍然会导致同一个DataNode中的不同磁盘存储的数据很不均衡。即使你使用的是基于可用空间的策略，卷（volume）不平衡仍可导致较低效率的磁盘I/O。比如所有新增的数据块都会往新增的磁盘上写，在此期间，其他的磁盘会处于空闲状态，这样新的磁盘将会是整个系统的瓶颈。 解决方案： HDFS-1312 在线磁盘均衡器，旨在根据各种指标重新平衡正在运行DataNode上的磁盘数据；离线的脚本平衡脚本 升级HDFS版本到3.0使用HDFS自带的磁盘均衡器(diskbalancer) CDH告警-邮件通知简介CDH提供了一套完整的监控告警机制，可以通过配置实现对机器、全部或者某个服务进行监控，若出现问题及时发送告警邮件到相关责任人，让责任人在第一时间知晓平台状况，从而快速定位解决问题，减少企业运维成本，降低因服务不可用带来的损失。 详细配置服务器部署概要通过airflow进行任务调度调度，大数据集群通过sqoop将数据从业务数据库抽取到hive库；业务数据通过ETL加工最终把生成结果层数据；结果层通过kettle将数据从hive库导出到pg数据库。客户端通过连接高可用的Ngnix访问后端web界面，后端程序查询pg中的业务数据。 CDH集群服务器应用服务器","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-09-29T05:53:44.930Z","updated":"2018-09-29T05:53:44.930Z","comments":true,"path":"2018/09/29/hello-world/","link":"","permalink":"http://wylgeek.github.io.com/2018/09/29/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}